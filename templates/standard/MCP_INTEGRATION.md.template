# ðŸ”Œ MCP Integration Guide

## Overview

This service ({{SERVICE_NAME}}) was generated by [Mastermind](https://github.com/GlacierEQ/mastermind) and includes built-in Model Context Protocol (MCP) support.

## What is MCP?

Model Context Protocol enables AI agents to interact with this service through standardized tools, prompts, and resources.

## Available MCP Tools

### 1. Health Check
```typescript
{{SERVICE_NAME}}_health_check()
```
Returns current health status of the service.

### 2. Get Metrics
```typescript
{{SERVICE_NAME}}_get_metrics({
  metric_name: "http_requests_total",
  time_range: "1h"
})
```
Retrieve Prometheus metrics for analysis.

### 3. Query API
```typescript
{{SERVICE_NAME}}_query_api({
  endpoint: "/api/v1/users",
  method: "GET"
})
```
Execute API calls programmatically.

### 4. Get Logs
```typescript
{{SERVICE_NAME}}_get_logs({
  level: "error",
  limit: 100,
  since: "2025-12-21T00:00:00Z"
})
```
Retrieve structured logs for debugging.

## MCP Prompts

### Debug Session
```typescript
Use prompt: "debug_{{SERVICE_NAME}}"
Argument: { issue_description: "500 errors on /api/users" }
```
Starts interactive debugging with AI assistance.

### Optimization Analysis
```typescript
Use prompt: "optimize_{{SERVICE_NAME}}"
Argument: { optimization_target: "cost" }
```
Analyzes service and suggests improvements.

## MCP Resources

- `{{SERVICE_NAME}}://docs` - Complete API documentation
- `{{SERVICE_NAME}}://metrics` - Real-time metrics feed
- `{{SERVICE_NAME}}://health` - Health status endpoint

## Integration with AI Orchestrators

### Zenith Orchestrator

This service is automatically discoverable by [Zenith](https://github.com/GlacierEQ/zenith-orchestrator):

```yaml
# Zenith will automatically detect via .mastermind-manifest.yml
service: {{SERVICE_NAME}}
capabilities: 12 MCP tools
orchestration: enabled
```

### Claude Desktop

Add to your Claude Desktop MCP config:

```json
{
  "mcpServers": {
    "{{SERVICE_NAME}}": {
      "command": "node",
      "args": ["{{SERVICE_PATH}}/.mcp/server.js"],
      "env": {
        "SERVICE_URL": "http://localhost:3000"
      }
    }
  }
}
```

### GitHub Copilot

This service exposes GitHub Copilot-compatible endpoints:

```bash
# Copilot can access via:
GET /api/copilot/context
GET /api/copilot/capabilities
```

## Service Discovery

The `.mastermind-manifest.yml` file enables automatic service discovery:

```yaml
orchestration:
  compatible_with: [zenith, kubernetes, nomad]
  mcp_tools_exposed: 12
  service_discovery: true
```

Orchestrators can:
- Auto-detect service capabilities
- Route requests intelligently
- Monitor service health
- Scale based on metrics

## Custom MCP Tools

To add custom tools for your service:

1. Edit `.mcp/tools.ts`
2. Follow the MCP tool schema
3. Register in `.mcp/server.json`
4. Rebuild MCP server

```typescript
// .mcp/tools.ts
export const customTool = {
  name: '{{SERVICE_NAME}}_custom_action',
  description: 'Your custom functionality',
  inputSchema: {
    // Define inputs
  },
  execute: async (inputs) => {
    // Implementation
  }
};
```

## Monitoring MCP Usage

MCP interactions are logged and metered:

```bash
# View MCP usage metrics
curl http://localhost:3000/metrics | grep mcp_tool_calls

# Example output:
mcp_tool_calls_total{tool="health_check"} 1523
mcp_tool_calls_total{tool="get_metrics"} 842
mcp_tool_calls_total{tool="query_api"} 634
```

## Security

MCP endpoints require authentication:

```typescript
// All MCP tools check JWT tokens
headers: {
  'Authorization': 'Bearer <your-token>'
}
```

Configure in `config/mcp-security.yml`.

## Troubleshooting

### MCP Server Won't Start

```bash
# Check logs
docker logs {{SERVICE_NAME}}-mcp

# Verify config
node .mcp/validate-config.js
```
### Tools Not Appearing

```bash
# Rebuild MCP server
pnpm mcp:build

# Restart service
pnpm restart
```

### Authentication Failures

```bash
# Generate new MCP token
pnpm mcp:generate-token

# Update environment
export MCP_TOKEN=<new-token>
```

## Learn More

- [Model Context Protocol Spec](https://modelcontextprotocol.io)
- [Mastermind Documentation](https://github.com/GlacierEQ/mastermind)
- [Zenith Orchestrator](https://github.com/GlacierEQ/zenith-orchestrator)
- [MCP Best Practices](https://github.com/GlacierEQ/mastermind/docs/mcp-best-practices.md)

---

ðŸ¤– **This service is MCP-ready out of the box!**

Generated by Mastermind v{{MASTERMIND_VERSION}}